<!DOCTYPE html>
<!--
@Created on  : "Tuesday May 10 2022 21:10:21 GMT+0800 (China Standard Time)"
@Author      : zorrow2017
@Description : æ–‡ä»¶ä¼ è¾“
-->
<html lang="zh-Hans-CN">

<head>
    <title>æ–‡ä»¶ä¼ è¾“</title>
    <link href="new util/zserver81/View/jimvoncn.ico" rel="shortcut icon" type="image/x-icon" src="" />
    <meta charset="UTF-8">

    <!-- <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script> -->
    <script src="new util/zserver81/View/jquery-3.5.1.js"></script>
    <script type="text/javascript">
        /**
         * å…¨å±€å˜é‡
         */
        gv_message = "";
        go_error = "";

        /**
         * åˆå§‹åŒ–ï¼Œæ‰“å¼€ç½‘é¡µæ—¶æ˜¯å¦è‡ªåŠ¨ï¼š1.åˆ·æ–°èŠå¤©æ¡† 2.å¼€å¯æˆªå›¾
         */
        function sub_doInit() {
            showMessage("jim Initial");
            doChatBoard("refresh");
            doGUIScreenshot(true);
        }
        function doChatBoard(iv_operate) {
            var board = $("#P_inputMain");
            var boardout = $("#P_outPublic");
            var lo_message = $("#message");
            var lv_old = board.val();
            var lv_get = "", lv_result = "";
            if (!lv_old.endsWith("\n")) {
                lv_old = lv_old + "\n";
            }
            console.log(lv_old);

            //
            $.ajax({
                type: "POST",
                url: "/chat",
                // async: true,
                contentType: "application/json;charset=utf-8",
                dataType: "text",
                data: JSON.stringify({ "reqString": lv_old, "operate": iv_operate }),
                beforeSend: function () {
                },
                success: function (sdata, status, xhr) {
                    //var data = JSON.parse(sdata);
                    console.log(sdata);
                    var lv_str = "";
                    var ls_json = JSON.parse(sdata);
                    for (let lv_i of ls_json.allString) {
                        lv_str += lv_i + "\n";
                    }
                    boardout.val(lv_str);
                    showMessage(iv_operate + " chat æˆåŠŸ");
                },
                error: function (ex) {
                    go_error = ex;
                    console.log(ex);
                    showMessage(ex.responseText);
                }
            });
        }

        function doGUIScreenshot(iv_isRun) {
            var lo_open = $("#b_open");
            var lo_close = $("#b_close");
            var lo_message = $("#message");

            // //2æ¬¡æŒ‰æ‰“å¼€æŒ‰é’®åˆ™å…³é—­
            // if (lo_close.attr("disabled") == undefined && iv_isRun == true) {
            //     iv_isRun = false;
            // }

            //
            $.ajax({
                type: "POST",
                url: "/gui/openScreenshot",
                // async: true,
                contentType: "application/json;charset=utf-8",
                dataType: "text",
                data: JSON.stringify({ "iv_isRun": iv_isRun }),
                beforeSend: function () {
                },
                success: function (sdata, status, xhr) {
                    //var data = JSON.parse(sdata);
                    console.log(sdata);
                    var lv_str = "";
                    var ls_json = JSON.parse(sdata);
                    if (ls_json.type == "S") {
                        showMessage(ls_json.message);
                        if (iv_isRun == true) {
                            lo_close.attr("disabled", false);
                        } else {
                            lo_close.attr("disabled", true);
                        }
                    }
                },
                error: function (ex) {
                    go_error = ex;
                    console.log(ex);
                    showMessage(ex.toString());
                }
            });
        }
        function doGUIKeyUse() {
            //
            $.ajax({
                type: "POST",
                url: "/gui/getKeyUse",
                // async: true,
                contentType: "application/json;charset=utf-8",
                dataType: "text",
                data: null,
                beforeSend: function () {
                },
                success: function (sdata, status, xhr) {
                    //var data = JSON.parse(sdata);
                    console.log(sdata);
                    var lv_str = "";
                    showMessage("é”®ç›˜é¢‘ç‡getæˆåŠŸ");
                    $("#P_outPublic").val(sdata);
                },
                error: function (ex) {
                    go_error = ex;
                    console.log(ex);
                    showMessage(ex.toString());
                }
            });
        }
        function doHash() {
            var lv_file = $("#P_inputMain").val();
            //æ–‡ä»¶åå»æ‰å‰ååŒå¼•å·
            lv_file = lv_file.replace(/^[\s"]+/g, "");
            lv_file = lv_file.replace(/[\s"]+$/g, "");
            var lv_hash = "sha256";
            //
            $.ajax({
                type: "POST",
                url: "/ajax/getHash",
                // async: true,
                contentType: "application/json;charset=utf-8",
                dataType: "text",
                data: JSON.stringify({ "iv_file": lv_file, "iv_hash": lv_hash }),
                beforeSend: function () {
                },
                success: function (sdata, status, xhr) {
                    //var data = JSON.parse(sdata);
                    console.log(sdata);
                    var lv_str = "";
                    showMessage("hash getæˆåŠŸ");
                    $("#P_outPublic").val(sdata);
                },
                error: function (ex) {
                    go_error = ex;
                    console.log(ex);
                    showMessage(ex.responseText);
                }
            });
        }
        function doEnc() {
            var lv_data = $("#P_inputMain").val();
            var lv_key = $("#P_out2").val();
            if (lv_key.length == 0) {
                lv_key = "å¯†ç æ˜¯å¯†ç æ”¯æŒä¸­æ–‡";
                $("#P_out2").val(lv_key);
            }
            //
            $.ajax({
                type: "POST",
                url: "/ajax/doEnc",
                // async: true,
                contentType: "application/json;charset=utf-8",
                dataType: "text",
                data: JSON.stringify({ "iv_key": lv_key, "iv_data": lv_data }),
                beforeSend: function () {
                },
                success: function (sdata, status, xhr) {
                    //var data = JSON.parse(sdata);
                    console.log(sdata);
                    var lv_str = "";
                    showMessage("åŠ å¯†æˆåŠŸ");
                    $("#P_outPublic").val(sdata);
                },
                error: function (ex) {
                    go_error = ex;
                    console.log(ex);
                    showMessage(ex.responseText);
                }
            });
        }
        function doDec() {
            var lv_data = $("#P_inputMain").val();
            var lv_key = $("#P_out2").val();
            if (lv_key.length == 0) {
                lv_key = "å¯†ç æ˜¯å¯†ç æ”¯æŒä¸­æ–‡";
                $("#P_out2").val(lv_key);
            }
            //
            $.ajax({
                type: "POST",
                url: "/ajax/doDec",
                // async: true,
                contentType: "application/json;charset=utf-8",
                dataType: "text",
                data: JSON.stringify({ "iv_key": lv_key, "iv_data": lv_data }),
                beforeSend: function () {
                },
                success: function (sdata, status, xhr) {
                    //var data = JSON.parse(sdata);
                    console.log(sdata);
                    var lv_str = "";
                    showMessage("è§£å¯†æ²¡æŠ¥é”™ï¼Œè§£å¯†ç»“æœè§å¤§è¾“å‡ºæ¡†");
                    $("#P_outPublic").val(sdata);
                },
                error: function (ex) {
                    go_error = ex;
                    console.log(ex);
                    showMessage(ex.responseText);
                }
            });
        }
        function showMessage(iv_msg = null) {
            var boardout = $("#P_outPublic");
            var lo_message = $("#message");
            if (iv_msg == null) {
            } else {
                gv_message = iv_msg;
            }
            lo_message.text(gv_message);
        }
        function detailMessage() {
            var boardout = $("#P_outPublic");
            var lo_message = $("#message");
            boardout.val(gv_message);
        }
        function copyBlock(parid) {
            //å– $('#parid').child('pre').first();
            var par = document.getElementById(parid);
            var txt = par.innerText;

            // åˆ›å»ºå…ƒç´ ç”¨äºå¤åˆ¶
            // const aux = document.createElement('textarea');
            const aux = document.getElementById("clipboard");
            // è·å–å¤åˆ¶å†…å®¹
            // const content = txt;//'qqq'
            // è®¾ç½®å…ƒç´ å†…å®¹
            // aux.setAttribute('value', content);
            aux.value = txt;
            // å°†å…ƒç´ æ’å…¥é¡µé¢è¿›è¡Œè°ƒç”¨
            //  document.body.appendChild(aux);
            // å¤åˆ¶å†…å®¹
            aux.select();
            // å°†å†…å®¹å¤åˆ¶åˆ°å‰ªè´´æ¿
            document.execCommand("copy");
            // // åˆ é™¤åˆ›å»ºå…ƒç´ 
            // document.body.removeChild(aux);
        }
        function doGetTime() {
            var lv_str = (new Date()).toString();
            $("#P_outPublic").val(lv_str);
        }
    </script>

    <style type="text/css">
        #P_inputMain {
            width: 50%;
            height: 60px;
            border: solid 1px green;
        }

        #P_outPublic {
            display: inline-block;
            width: 80%;
            height: 400px;
        }

        #P_out2 {
            display: inline-block;
            width: 18%;
            height: 100px;
        }

        main {
            margin: 0 1% 4% 1%;
        }

        footer {
            position: fixed;
            top: 97%;
            border: solid 2px rgba(0, 0, 255, 10%);
            background-color: white;
            margin: 0 1% 0 0.1%;
            width: 96%;
        }
    </style>

    <meta name="description" content="æ–‡ä»¶ä¼ è¾“">
    <meta name="keywords" content="temp" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body onload="sub_doInit()">
    <main>
        <mark><a href="">refresh</a></mark><br />

        <section>
            <ol class="fileup_main_ol"></ol><br />

            <form method="post" enctype="multipart/form-data" action="/fileup?up=qq">
                <!-- formé‡Œé¢åªèƒ½æœ‰ä¸€ä¸ª<inputï¼› -->
                File chose: <input type="file" name="fileup" required />
                <button type="submit">commit</button>
                æ–‡ä»¶ä¸Šä¼ 
                <br />
            </form>
            <br />
        </section>


        <section>
            ä¸»è¾“å…¥æ¡†:
            <button type="button" onclick="doChatBoard('chat')" title="æŠŠä¸»è¾“å…¥æ¡†å†…å®¹å¢åŠ åˆ°èŠå¤©è®°å½•">append</button>
            <button type="button" onclick="doHash()" title="åœ¨ä¸»è¾“å…¥æ¡†è¾“å…¥æ–‡ä»¶è·¯å¾„ï¼Œè¾“å‡ºæ­¤æ–‡ä»¶çš„sha256å“ˆå¸Œå€¼">SHA256</button>
            <button type="button" onclick="doEnc()" title="æŠŠä¸»è¾“å…¥æ¡†å†…å®¹åŠ å¯†(å¯†ç è¯·æ‰‹åŠ¨è¾“å…¥åˆ°å°è¾“å‡ºæ¡†)">åŠ å¯†</button>
            <button type="button" onclick="doDec()" title="å¯†ç è¯·æ‰‹åŠ¨ç²˜è´´åˆ°å°è¾“å‡ºæ¡†">è§£å¯†</button>
            <br />
            <textarea id="P_inputMain" placeholder="ä¸»è¾“å…¥æ¡†: TODO say something" title="ä¸»è¾“å…¥æ¡†"></textarea>
            <button type="button" title="è·ŸappendæŒ‰é’®ä¸€æ ·" onclick="doChatBoard('chat')">Send</button>
            <br />

            èŠå¤©è®°å½•æ¡†ã€å¤§è¾“å‡ºæ¡†ã€ä¸»è¾“å‡ºæ¡†:
            <button type="button" onclick="doChatBoard('refresh')" title="åˆ·æ–°èŠå¤©è®°å½•">refresh &circlearrowleft; </button>
            <button type="button" onclick="doChatBoard('clear')" title="ã€è¯·å…ˆå¤‡ä»½chat.txtã€‘å¼ºè¡Œæ¸…ç©ºä¹‹å‰çš„å…¨éƒ¨èŠå¤©è®°å½•">delete all</button>
            <br />
            <textarea id="P_outPublic" placeholder="å…¨å±€èŠå¤©å®¤ï¼Œè¿˜æ²¡äººå‘è¨€" title="ä¸»è¾“å‡ºæ¡†"></textarea>

            <textarea id="P_out2" placeholder="è¾“å‡ºæ¡†2å·ã€å°è¾“å‡ºæ¡†" title="è¾“å‡ºæ¡†2å·ã€å°è¾“å‡ºæ¡†"></textarea>
            <br />
            <br />
        </section>



        <section>
            å¹¿å‘Šï¼š<br />

            <div>
                1.<a href="https://code.visualstudio.com/Download" target="_blank">vscode</a>
                åŒ å¿ƒç‹¬é€ ï¼Œä½ å€¼å¾—æ‹¥æœ‰
            </div>

            <div>
                2.<a href="https://gitee.com/jimvoncn/nplz" target="_blank">nplz</a>
                åäººä¼ è®°ï¼Œæ³•å›½å¤§é©å‘½
            </div>

            <div>
                3.<a href="https://gitee.com/jimvoncn/python_jim" target="_blank">python_jim</a>
                æœ€ç°ä»£çš„æ–°æ€ç»´ï¼Œè‡ªå·±ç»™è‡ªå·±æ‰“å¹¿å‘Š --åˆåœ¨éª—äººå­¦ç¼–ç¨‹
            </div>

        </section>
        <br />
        <br />


        <section>
            <button type="button" onclick="doGUIScreenshot(true)" id="b_open"
                title="é¡»ä¾èµ–åŒ…ã€ä»…åœ¨Windowsè¯•è¿‡ã€å¯èƒ½è¦æ‰‹åŠ¨æ”¹æ–‡ä»¶å¤¹">æ‰“å¼€æˆªå›¾æœåŠ¡</button>
            <button type="button" onclick="doGUIScreenshot(false)" id="b_close" disabled>å…³é—­æˆªå›¾æœåŠ¡</button>
            <button type="button" onclick="doGUIKeyUse()" title="é€šè¿‡å¼€å¯zprintScreenç›‘å¬é”®ç›˜æœåŠ¡ï¼Œè·å–é”®ç›˜æŒ‰é”®é¢‘ç‡">ç»Ÿè®¡é”®ç›˜é¢‘ç‡</button>
            <br />

            <button type="button" onclick="doGetTime()">å½“å‰æ—¶é—´</button>
            <br />

            å°šæœªå®ç°ï¼šäºŒç»´ç ã€æ–‡æœ¬å·®å¼‚å¯¹æ¯”ã€è¶…é“¾æ¥urlå¤„ç†ã€åŠ å¯†ã€ã€
            <br />
            æ‰€ä»¥ï¼šç°åœ¨åªæœ‰æ–‡ä»¶ã€æ–‡å­—ã€æˆªå›¾è¿™3å¤§æ ¸å¿ƒåŠŸèƒ½
            <br />

            å‰ªåˆ‡æ¿æ–‡æœ¬æ¡†ï¼š<textarea id="clipboard"></textarea>
        </section>
    </main>

    <footer>
        <button type="button" onclick="detailMessage()" title="æ˜¾ç¤ºåé¦ˆæ¶ˆæ¯çš„è¯¦ç»†å†…å®¹">#åé¦ˆæ¶ˆæ¯</button>
        <button type="button" onclick="copyBlock('message')" title="å¤åˆ¶åé¦ˆæ¶ˆæ¯">ğŸ—Šcopy</button>
        <label id="message" title="åé¦ˆæ¶ˆæ¯æ¡†">null</label>
    </footer>
</body>

</html>